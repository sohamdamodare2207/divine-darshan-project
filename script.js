// --- DATA: 12 Jyotirlingas ---
// Mapped to images 1-12 from your list
const jyotirlingas = [
    {
      name: "Somnath Jyotirlinga",
      location: "Prabhas Patan, Gujarat",
      img: "images/Gemini_Generated_Image_x3ln1bx3ln1bx3ln.png",
      desc: "Somnath is the first of the twelve Aadi Jyotirlingas of India. The word 'Somnath' means 'The Protector of the Moon God'. Legend has it that the Moon God, Chandra, was cursed by Daksha Prajapati to lose his luster. Chandra prayed to Lord Shiva here at Prabhas Patan, and Shiva blessed him, relieving the curse.\n\nThe temple is a symbol of resilience, having been destroyed by invaders like Mahmud of Ghazni and rebuilt sixteen times. The present structure was rebuilt in 1951 in the Chalukya style of architecture. It is situated at such a unique location that there is no land in a straight line between the Somnath seashore and Antarctica. The Shivalinga here is believed to be self-manifested (Swayambhu) and radiates immense spiritual energy.",
      nearby: "Triveni Sangam, Bhalka Tirth, Somnath Beach",
      mapQuery: "Somnath Temple Gujarat"
    },
    {
      name: "Mallikarjuna Jyotirlinga",
      location: "Srisailam, Andhra Pradesh",
      img: "images/Gemini_Generated_Image_196ydv.png",
      desc: "Located on the Nallamala hills, Srisailam is home to the Mallikarjuna Jyotirlinga. It is unique because it is one of the few shrines that is both a Jyotirlinga and a Shakti Peetha (Bhramaramba Devi). The legend goes that Lord Shiva and Parvati came here to pacify their son Kartikeya, who was angry because Ganesha was married before him.\n\nShiva appeared as Arjuna (Mallikarjuna) and Parvati as Mallika. The temple complex is like a fortress with massive walls. The River Krishna flows here as Patalaganga. Devotees are allowed to touch the Linga and perform Abhishekam personally, which is a rare privilege. The temple architecture dates back to the Vijayanagara empire.",
      nearby: "Srisailam Dam, Akkamahadevi Caves, Patala Ganga",
      mapQuery: "Mallikarjuna Jyotirlinga Srisailam"
    },
    {
      name: "Mahakaleshwar Jyotirlinga",
      location: "Ujjain, Madhya Pradesh",
      img: "images/Gemini_Generated_Image_cu89tecu89tecu89.png",
      desc: "Mahakaleshwar in Ujjain is the only Jyotirlinga that faces south (Dakshinamurti), representing the direction of death, which Shiva conquers. The temple is world-famous for the 'Bhasma Aarti', a ritual where the deity is worshipped with sacred ash (Bhasma) every morning before dawn. It is believed that the ash was originally taken from fresh funeral pyres, symbolizing the reality of life and death.\n\nThe complex is situated on the banks of the Shipra River. The Linga is Swayambhu (self-born), deriving currents of power (Shakti) from within itself. The temple has five levels, with the Omkareshwar Linga on the second floor. It is one of the most powerful tantric centers in India.",
      nearby: "Kal Bhairav Temple, Ram Ghat, Harsiddhi Mata Temple",
      mapQuery: "Mahakaleshwar Jyotirlinga Ujjain"
    },
    {
      name: "Omkareshwar Jyotirlinga",
      location: "Khandwa, Madhya Pradesh",
      img: "images/Gemini_Generated_Image_oumqi3oumqi3oumq.png",
      desc: "Omkareshwar is situated on an island called Mandhata in the Narmada River. The island's shape naturally resembles the sacred symbol 'Om'. The Jyotirlinga here is split into two parts: Omkareshwar and Mamleshwar (Amaleshwar), located on the opposite bank of the river. Devotees consider the pilgrimage complete only after visiting both.\n\nThe legend says the Vindhya mountain prayed to Shiva to become greater than Meru, and Shiva appeared here to bless him. The daily bed-time ritual (Shayan Aarti) here is very special, where a game of dice (Chopad) is arranged for Shiva and Parvati. The Narmada river here is very deep and home to many crocodiles, adding to the raw nature of the location.",
      nearby: "Mamleshwar Temple, Siddhanath Temple, Narmada Ghat",
      mapQuery: "Omkareshwar Jyotirlinga"
    },
    {
      name: "Kedarnath Jyotirlinga",
      location: "Rudraprayag, Uttarakhand",
      img: "images/Gemini_Generated_Image_y40bn4y40bn4y40b.png",
      desc: "Perched at an altitude of 3,583 meters in the Himalayas, Kedarnath is one of the holiest shrines. It is part of the Chota Char Dham. Legend says that after the Kurukshetra war, the Pandavas sought Lord Shiva to atone for the sins of killing their kin. Shiva, unwilling to forgive them easily, disguised himself as a bull. When Bhima tried to catch the bull, it dove into the ground, leaving its hump above the surface, which is worshipped as the conical Linga today.\n\nThe temple opens only for six months (April to November) due to extreme snow. During winter, the deity is moved to Ukhimath. The temple survived the massive 2013 floods, often called a miracle by devotees.",
      nearby: "Bhairavnath Temple, Vasuki Tal, Chorabari Tal",
      mapQuery: "Kedarnath Temple"
    },
    {
      name: "Bhimashankar Jyotirlinga",
      location: "Pune, Maharashtra",
      img: "images/Gemini_Generated_Image_k2aguyk2aguyk2ag.png",
      desc: "Located in the lush green Sahyadri hills, Bhimashankar is the source of the Bhima River. The temple is a blend of old and new Nagara style architecture. According to legend, a demon named Bhima (son of Kumbhakarna) terrorized the world to avenge his father's death. Lord Shiva fought him and reduced him to ashes; the heat generated caused the river Bhima to evaporate, but Shiva's sweat formed the river again.\n\nThe surroundings are a wildlife sanctuary, famous for the Giant Indian Squirrel (Shekru). It is a nature lover's paradise as much as a pilgrim center. The Linga is quite thick and is believed to have been established by the Pandavas during their exile.",
      nearby: "Bhimashankar Wildlife Sanctuary, Gupt Bhimashankar",
      mapQuery: "Bhimashankar Jyotirlinga"
    },
    {
      name: "Kashi Vishwanath",
      location: "Varanasi, Uttar Pradesh",
      img: "images/Gemini_Generated_Image_fqa8jhfqa8jhfqa8.png",
      desc: "Kashi (Varanasi) is considered the oldest living city in the world and the center of the Hindu universe. The Vishwanath Temple (Lord of the Universe) stands on the western bank of the holy Ganga. It is believed that a mere view of this Jyotirlinga cleanses one of all sins. The city is Shiva's favorite home. Legend says that when the earth was created, the first ray of light fell on Kashi.\n\nPeople come here to die, believing that Shiva himself whispers the Tarak Mantra into the ears of the dying, granting Moksha (Liberation). The current temple was built by Queen Ahilyabai Holkar in 1780. The golden spire uses tons of gold donated by Maharaja Ranjit Singh.",
      nearby: "Dashashwamedh Ghat, Sankat Mochan Hanuman Temple, Sarnath",
      mapQuery: "Kashi Vishwanath Temple"
    },
    {
      name: "Trimbakeshwar Jyotirlinga",
      location: "Nashik, Maharashtra",
      img: "images/Gemini_Generated_Image_vgziadvgziadvgzi.png",
      desc: "Trimbakeshwar is unique for its three-faced Linga, representing the Trinity: Brahma, Vishnu, and Shiva. It is located at the foothills of Brahmagiri mountain, the origin of the Godavari River (Dakshin Ganga). The temple is built entirely of black stone. A distinctive feature is a depression on the Linga where water constantly seeps out naturally.\n\nLegend says Sage Gautama performed penance here to be relieved of the sin of accidentally killing a cow (Gohatya), and he requested Ganga to flow down. The Kumbh Mela is held here every 12 years. The crown of the deity is studded with diamonds and precious stones, displayed every Monday.",
      nearby: "Brahmagiri Hills, Anjaneri Fort, Panchvati",
      mapQuery: "Trimbakeshwar Jyotirlinga"
    },
    {
      name: "Vaidyanath Jyotirlinga",
      location: "Deoghar, Jharkhand",
      img: "images/Gemini_Generated_Image_dagc7idagc7idagc.png",
      desc: "Known as Baba Baidyanath Dham, this shrine is associated with the demon king Ravana. Ravana, a great devotee of Shiva, performed severe penance and cut off his ten heads one by one to please Shiva. Shiva descended to cure (Vaidya means Doctor) Ravana and restore his heads. Ravana was taking this Linga to Lanka but was tricked by the gods into placing it on the ground here, where it got rooted forever.\n\nThe temple complex has 22 other temples. During the month of Shravan, millions of devotees (Kanwariyas) carry holy water from the Ganges at Sultanganj (100km away) and walk barefoot to offer it here.",
      nearby: "Basukinath Temple, Trikut Pahar, Tapovan",
      mapQuery: "Vaidyanath Jyotirlinga Deoghar"
    },
    {
      name: "Nageshwar Jyotirlinga",
      location: "Dwarka, Gujarat",
      img: "images/Gemini_Generated_Image_hnzjubhnzjubhnzj.png",
      desc: "Nageshwar is the first Jyotirlinga on earth according to the Shiva Purana. It symbolizes protection from all poisons (Snake bites and worldly poisons). The temple houses a large statue of a seated Lord Shiva visible from afar. The legend involves a demoness named Daruka who imprisoned a devotee named Supriya. Supriya chanted 'Om Namah Shivaya', and Shiva appeared to defeat the demon.\n\nThe Linga faces South, but the Gomugam faces East. It is located very close to Dwarka, the kingdom of Lord Krishna, making it a dual pilgrimage site for Shaivites and Vaishnavites.",
      nearby: "Dwarkadhish Temple, Rukmini Devi Temple, Gopi Talav",
      mapQuery: "Nageshwar Jyotirlinga Gujarat"
    },
    {
      name: "Rameshwaram Jyotirlinga",
      location: "Rameswaram, Tamil Nadu",
      img: "images/Gemini_Generated_Image_rac7grac7grac7gr.png",
      desc: "Rameshwaram is the southernmost Jyotirlinga and highly significant as it was established by Lord Rama himself. Before crossing the bridge (Ram Setu) to Lanka to rescue Sita, Rama wanted to pray to Shiva to absolve the sin of killing Ravana (a Brahmin). Since the idol from Kashi was delayed, Sita made a Linga out of sand, which is the main deity today.\n\nThe temple has the longest corridor in the world with 1212 pillars. There are 22 Theerthams (holy water wells) inside the complex, and devotees bathe in all of them before entering the sanctum. It is a perfect unification point of Shaivism and Vaishnavism.",
      nearby: "Dhanushkodi, Agni Theertham, Pamban Bridge",
      mapQuery: "Ramanathaswamy Temple Rameshwaram"
    },
    {
      name: "Grishneshwar Jyotirlinga",
      location: "Aurangabad, Maharashtra",
      img: "images/Gemini_Generated_Image_kwhztnkwhztnkwhz.png",
      desc: "Grishneshwar is the twelfth and final Jyotirlinga. It is located extremely close to the UNESCO World Heritage site, the Ellora Caves. The temple was destroyed by the Delhi Sultanate but was lovingly restored by Maloji Raje Bhosale (grandfather of Chhatrapati Shivaji Maharaj) and later by Ahilyabai Holkar. The legend involves a devout woman named Ghushma whose son was killed by her jealous sister.\n\nGhushma continued her worship of Shiva composedly, and Shiva, pleased by her devotion, restored her son to life and resided here as Grishneshwar (Lord of Ghushma). Men are required to enter the sanctum bare-chested to perform rituals.",
      nearby: "Ellora Caves, Daulatabad Fort, Bibi Ka Maqbara",
      mapQuery: "Grishneshwar Jyotirlinga"
    }
];

// --- DATA: 10 Avatars ---
// Mapped to images 13-22 from your list
const avatars = [
    {
      name: "Matsya Avatar",
      location: "Nagalapuram, Andhra Pradesh",
      img: "images/Gemini_Generated_Image_v3g3z7v3g3z7v3g3.png",
      desc: "Matsya is the first avatar of Vishnu, taking the form of a giant fish. This avatar appeared during the Satya Yuga. The primary purpose was to save the first man, Manu, and the seven sages (Saptarishis) from a catastrophic cosmic flood (Pralaya). Matsya also recovered the Vedas, which had been stolen by a demon named Hayagriva who hid them in the ocean. The fish guided Manu's boat through the rough waters to the Himalayas.\n\nThis story shares strong parallels with the legend of Noah's Ark. The Veda Narayana Temple in Nagalapuram is a rare temple dedicated to this avatar, where the idol holds the Sudarshana Chakra ready for battle.",
      nearby: "Kailasakona Waterfalls, Ubbalamadugu Falls, Tirupati",
      mapQuery: "Veda Narayana Temple Nagalapuram"
    },
    {
      name: "Kurma Avatar",
      location: "Srikurmam, Andhra Pradesh",
      img: "images/Gemini_Generated_Image_nji6xknji6xknji6.png",
      desc: "Kurma, the Tortoise, is the second avatar. During the churning of the cosmic ocean (Samudra Manthan) by the Devas (gods) and Asuras (demons) to obtain the nectar of immortality (Amrita), the Mount Mandara, used as the churning rod, began to sink. Vishnu took the form of a giant tortoise to support the mountain on his back.\n\nThis avatar symbolizes stability and the ability to withdraw one's senses. The Srikurmam temple is the only temple in the world dedicated to the Kurma avatar. Uniquely, the temple has two flagstaffs (Dwajasthambams), and the idol faces West, unlike the usual East.",
      nearby: "Arasavalli Sun Temple, Kalingapatnam Beach",
      mapQuery: "Sri Kurmam Temple"
    },
    {
      name: "Varaha Avatar",
      location: "Srimushnam, Tamil Nadu",
      img: "images/Gemini_Generated_Image_h7v3yeh7v3yeh7v3.png",
      desc: "Varaha is the third avatar, appearing as a Boar. When the demon Hiranyaksha dragged the Earth (Bhudevi) to the bottom of the cosmic ocean, Vishnu took this form to rescue her. The boar dived into the ocean, killed the demon after a thousand-year battle, and lifted the Earth on his tusks. This avatar represents the restoration of dharma and the earth.\n\nThe temple at Srimushnam is one of the eight self-manifested shrines (Swayamvyakta Kshetras) of Vishnu. The idol here is very small and is formed of Saligrama stone. Muslims in the nearby area also offer worship here, signifying great communal harmony.",
      nearby: "Chidambaram Nataraja Temple, Pichavaram Mangrove Forest",
      mapQuery: "Bhuvaraha Swamy Temple Srimushnam"
    },
    {
      name: "Narasimha Avatar",
      location: "Ahobilam, Andhra Pradesh",
      img: "images/Gemini_Generated_Image_xwug2yxwug2yxwug.png",
      desc: "Narasimha (Man-Lion) is the fourth and fiercest avatar. He appeared to protect his young devotee Prahlada from his tyrannical father, Hiranyakashipu. The demon had a boon that he could not be killed by man or beast, day or night, inside or outside, or by any weapon. Vishnu circumvented this by appearing as a half-man, half-lion, at twilight, on the threshold, and tearing the demon apart with his claws.\n\nAhobilam is the exact place where this event occurred. There are nine temples of Narasimha (Nava Narasimha) located within the dense Nallamala forests here, requiring a trek to visit all.",
      nearby: "Nallamala Forests, Belum Caves, Mahanandi",
      mapQuery: "Ahobilam Narasimha Temple"
    },
    {
      name: "Vamana Avatar",
      location: "Kanchipuram, Tamil Nadu",
      img: "images/Gemini_Generated_Image_n8p44kn8p44kn8p4.png",
      desc: "Vamana was the first human avatar (a dwarf Brahmin). The benevolent demon king Mahabali had conquered the three worlds. To restore balance, Vishnu appeared as Vamana and asked Bali for just three paces of land. When Bali agreed, Vamana grew to cosmic size (Trivikrama), covering the earth in one step and the heavens in the second.\n\nWith nowhere left for the third step, Bali offered his own head. Vishnu pushed him to the netherworld but granted him immortality. The Ulagalantha Perumal Temple depicts Vishnu in his gigantic form with one leg raised high, measuring the sky.",
      nearby: "Kamakshi Amman Temple, Ekambareswarar Temple",
      mapQuery: "Ulagalantha Perumal Temple Kanchipuram"
    },
    {
      name: "Parashurama Avatar",
      location: "Chiplun, Maharashtra",
      img: "images/Gemini_Generated_Image_fsziwufsziwufszi.png",
      desc: "Parashurama (Rama with an axe) is the sixth avatar, born to Sage Jamadagni. He is an immortal (Chiranjeevi) warrior sage. He descended to rid the earth of the tyranny of the Kshatriya (warrior) caste who had become corrupt and oppressive. Legend says he circled the world 21 times destroying evil kings. He is also credited with creating the land of Kerala and Konkan by throwing his axe into the sea, causing the waters to recede.\n\nThe temple in Chiplun is dedicated to him, located on a hillock offering views of the Vashisthi River. He is believed to still be meditating in the Himalayas.",
      nearby: "Sawatsada Waterfall, Koyna Dam, Guhagar Beach",
      mapQuery: "Parashurama Temple Chiplun"
    },
    {
      name: "Rama Avatar",
      location: "Ayodhya, Uttar Pradesh",
      img: "images/Gemini_Generated_Image_ai9qhzai9qhzai9q.png",
      desc: "Lord Rama, the seventh avatar, is the embodiment of truth and morality (Maryada Purushottam). Born in Ayodhya, his life story is the Ramayana. He gave up his throne to honor his father's word and spent 14 years in exile. His victory over the demon king Ravana signifies the triumph of good over evil. His reign, Ram Rajya, is considered the ideal governance.\n\nThe newly constructed Ram Mandir in Ayodhya stands at his birthplace (Ram Janmabhoomi). It is a grand Nagara style temple. Rama is worshipped not just as a god but as the ideal son, brother, husband, and king.",
      nearby: "Hanuman Garhi, Kanak Bhawan, Sarayu River Ghats",
      mapQuery: "Ram Mandir Ayodhya"
    },
    {
      name: "Krishna Avatar",
      location: "Dwarka, Gujarat",
      img: "images/Gemini_Generated_Image_pfny7zpfny7zpfny.png",
      desc: "Krishna is the eighth and complete avatar (Purna Avatar). He is the central figure of the Mahabharata and the speaker of the Bhagavad Gita. His childhood in Vrindavan, his role as a statesman in Dwarka, and his guidance to Arjuna in the war are legendary. He taught the philosophy of Karma Yoga (selfless action).\n\nDwarka was his kingdom, which he built on land reclaimed from the sea. The Dwarkadhish temple (Jagat Mandir) is a 5-storied structure supported by 72 pillars. The flag atop the temple shows the Sun and Moon, implying that Krishna will be there as long as the sun and moon exist.",
      nearby: "Bet Dwarka, Rukmini Temple, Gomti Ghat",
      mapQuery: "Dwarkadhish Temple"
    },
    {
      name: "Buddha Avatar",
      location: "Bodh Gaya, Bihar",
      img: "images/Gemini_Generated_Image_3j9ijz3j9ijz3j9i.png",
      desc: "In many Vaishnava traditions, Gautama Buddha is considered the ninth avatar. He appeared to preach non-violence (Ahimsa) and compassion, moving people away from excessive ritualism and animal sacrifice. He attained enlightenment under the Bodhi Tree in Bodh Gaya. His teachings on the Four Noble Truths and the Eightfold Path guide humanity toward the cessation of suffering (Nirvana).\n\nThe Mahabodhi Temple is a UNESCO World Heritage site and houses the descendant of the original Bodhi Tree. It is the holiest pilgrimage site for Buddhists worldwide.",
      nearby: "Great Buddha Statue, Dungeshwari Cave Temples",
      mapQuery: "Mahabodhi Temple Bodh Gaya"
    },
    {
      name: "Kalki Avatar",
      location: "Sambhal, UP (Prophesied)",
      img: "opening/Gemini_Generated_Image_9ycnd49ycnd49ycn.png",
      desc: "Kalki is the tenth and final avatar of Vishnu, who is yet to appear. It is prophesied that he will arrive at the end of the current Kali Yuga, when righteousness (Dharma) has completely vanished. He will appear riding a white horse named Devadatta, wielding a blazing sword to destroy the wicked and restore the Satya Yuga (Age of Truth).\n\nScriptures predict his birth in the village of Sambhal in Uttar Pradesh. A foundation for the Kalki Dham temple has been laid in Sambhal, anticipating his arrival. He represents the ultimate cleanser and the cyclic nature of time.",
      nearby: "Kalki Dham (Under Construction), Kelladevi Temple",
      mapQuery: "Sambhal Uttar Pradesh"
    }
];

// --- LOGIC ---

// 1. Enter Site
function enterSite() {
    const landing = document.getElementById('landing-screen');
    const app = document.getElementById('app-screen');
    const audio = document.getElementById('bg-audio');

  // Try to play audio immediately (still in the user click gesture)
  audio.volume = 0.5;
  audio.play().then(() => {
    updateAudioBtn(true);
  }).catch(error => {
    console.log("Audio play prevented or blocked:", error);
    updateAudioBtn(false);
  });

  // Fade out landing
  landing.style.opacity = '0';
  landing.style.transition = 'opacity 1s';

  setTimeout(() => {
    landing.classList.add('hidden');
    app.classList.remove('hidden');
        
    // Render initial data
    renderCards(jyotirlingas);
  }, 1000);
}

// 2. Audio Control
function toggleAudio() {
    const audio = document.getElementById('bg-audio');
    if (audio.paused) {
        audio.play();
        updateAudioBtn(true);
    } else {
        audio.pause();
        updateAudioBtn(false);
    }
}

function updateAudioBtn(playing) {
    const btn = document.getElementById('audio-toggle');
    if(playing) {
        btn.innerHTML = "ğŸ”Š Mantra Playing";
        btn.style.background = "#FF9933"; // Saffron
        btn.style.color = "black";
    } else {
        btn.innerHTML = "ğŸ”ˆ Play Mantra";
        btn.style.background = "rgba(255, 215, 0, 0.1)";
        btn.style.color = "#FFD700";
    }
}

// 3. Switch Tabs
function switchTab(type) {
    const btns = document.querySelectorAll('.tab-btn');
    btns.forEach(btn => btn.classList.remove('active'));
    
    // Set active class
    if(type === 'jyotirlinga') {
        document.querySelectorAll('.tab-btn')[0].classList.add('active');
        renderCards(jyotirlingas);
    } else {
        document.querySelectorAll('.tab-btn')[1].classList.add('active');
        renderCards(avatars);
    }
}

// 4. Render Cards
function renderCards(data) {
    const container = document.getElementById('grid-container');
    container.innerHTML = ''; // Clear existing

    data.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.onclick = () => openModal(index, data);

        card.innerHTML = `
            <img src="${item.img}" alt="${item.name}" loading="lazy">
            <div class="card-info">
                <h3>${item.name}</h3>
                <p style="color:#888; font-size: 0.9rem;">ğŸ“ ${item.location}</p>
            </div>
        `;
        container.appendChild(card);
    });
}

// 5. Modal Handling
function openModal(index, dataSource) {
    const item = dataSource[index];
    const modal = document.getElementById('modal-overlay');

    // Populate Data
    document.getElementById('modal-title').innerText = item.name;
    document.getElementById('modal-img').src = item.img;
    document.getElementById('modal-location').innerText = item.location;
    document.getElementById('modal-desc').innerText = item.desc;
    document.getElementById('modal-nearby').innerText = item.nearby;

    // Set Map
    const mapSrc = `https://maps.google.com/maps?q=${encodeURIComponent(item.mapQuery)}&t=&z=13&ie=UTF8&iwloc=&output=embed`;
    document.getElementById('map-frame').src = mapSrc;

    // Show Modal
    modal.classList.remove('hidden');
}

function closeModal() {
    document.getElementById('modal-overlay').classList.add('hidden');
    // Stop map iframe to save resources
    document.getElementById('map-frame').src = "";
}

// Initialize audio UI and event listeners so playback state is visible
function initAudioControls() {
  const audio = document.getElementById('bg-audio');
  const btn = document.getElementById('audio-toggle');

  function refresh() {
    // If audio element isn't present yet, skip
    if(!audio || !btn) return;
    updateAudioBtn(!audio.paused);
  }

  if(!audio) return;

  audio.addEventListener('play', () => {
    console.log('Mantra: play event');
    updateAudioBtn(true);
  });
  audio.addEventListener('pause', () => {
    console.log('Mantra: pause event');
    updateAudioBtn(false);
  });
  audio.addEventListener('ended', () => {
    console.log('Mantra: ended');
    updateAudioBtn(false);
  });
  audio.addEventListener('error', (e) => {
    console.error('Mantra: audio error', e);
    updateAudioBtn(false);
  });

  // Set initial state immediately (works even if DOMContentLoaded already fired)
  refresh();
}

// Run immediately to wire up controls
initAudioControls();